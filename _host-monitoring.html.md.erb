<%# WARNING!!!! %>
<%# DO NOT ADD READBILITY LINE WRAPPING TO THIS CONTENT THE LONG LINES MUSt REMAIN TO CORRECTLY FORMAT THE FOLLOWING SECTION'S MARKDOWN CONTENT %>
<%# <!-- WARNING!!!! --> %>

You have the ability to configure several monitoring features for 
monitoring host vms. These settings will not be visible to 
cluster users. This inclues the ability to forward BOSH-deployed VM logs
to a specified syslog endpoint, and configure transport of 
various metric sources. 

To configure host monitoring in <%= vars.product_tile %>, do the following:

1. Click **Host Monitoring**.

    ![Logging pane](images/host-monitoring.png)

1. Under **Enable Syslog for PKS**, select **Yes** to enable syslog forwarding for BOSH-deployed VM logs.
1. Under **Address**, enter the destination syslog endpoint.
1. Under **Port**, enter the destination syslog port.
1. Under **Transport Protocol**, select a transport protocol for log forwarding.
1. (Optional) To enable TLS encryption during log forwarding, perform the following steps:
  1. Ensure **Enable TLS** is selected.  
  <p class="note"><strong>Note</strong>: Logs may contain sensitive information. 
  	For example, logs may contain cloud provider credentials. 
  	Pivotal strongly recommends that you enable TLS encryption for log forwarding.
  </p>  
  1. Under **Permitter Peer**, provide the accepted fingerprint (SHA1) or name of remote peer. For example, `*.YOUR-LOGGING-SYSTEM.com`.
  1. Under **TLS Certificate**, provide a TLS certificate for the destination syslog endpoint.
  <p class="note"><strong>Note</strong>: You do not need to provide a new certificate if the TLS certificate for the destination syslog endpoint is signed by a Certificate Authority (CA) in your BOSH certificate store.
  </p>
<% if current_page.data.iaas == "vSphere" || current_page.data.iaas == "vSphere-NSX-T" %>
1. <%= partial 'vrealize-logs' %>
<% end %>

####<a id='telegraf'></a> Telegraf

You can configure the Telegraf agent to collect metrics and send the metrics to a third-party monitoring service.  

The Telegraf agent collects metrics from Node Exporter, etcd services and the Kubelet agent:  

* Node Exporter is a Prometheus monitoring service providing infrastructure and OS metrics to cluster metric sinks. For more information about Node Exporter metrics, see the [Node Exporter](https://github.com/prometheus/node_exporter#enabled-by-default) GitHub repository.  
* etcd provides local monitoring information useful for both system health checking and cluster debugging. 
* Kubelet provides an endpoint which details metrics for all workloads running in all clusters (This can introduce a large amount of metrics)

To connect a third-party monitoring service to <%= vars.product_short %>, complete the following steps:  

1. Create a configuration file for the third-party monitoring service. 
1. (Optional) Select **Include etcd metrics**. This will include etcd server metrics. 
1. (Optional) Select **Enable node exporter on master** to enable node exporter metrics from all master node VMs. 
1. (Optional) Select **Include kubelet metrics**. This will include all workload metrics across all clusters (This is a large volume of metrics) 
1. (Optional) Configure **Setup Telegraf Outputs** to enable a third-party monitoring service. Enter the contents of the configuration file you created in [Create a Configuration File](./monitor-etcd.html#toml).  
    If you do not want to output any metrics, leave the default value `[[outputs.discard]]`.
1. Click **Save**.

For more information on the Telegraf agent see [Monitoring Master/etcd Node VMs](./monitor-etcd.html).  
<%# WARNING!!!! %>
<%# <!-- DO NOT ADD READBILITY LINE WRAPPING TO THIS CONTENT THE LONG LINES MUSt REMAIN TO CORRECTLY FORMAT THE FOLLOWING SECTION'S MARKDOWN CONTENT  %>
<%#  WARNING!!!! %>
