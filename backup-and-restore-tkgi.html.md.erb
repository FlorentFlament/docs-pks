---
title: Backing Up and Restoring TKGI Clusters
owner: TKGI
---

This section describes how to back up and restore <%= vars.product_full %> nodes. <%= vars.product_short %> uses BOSH Backup and Restore (BBR) software to back up and restore the <%= vars.k8s_runtime_abbr %> Management Plane and Kubernetes clusters. For more information about BBR, see [BOSH Backup and Restore](https://docs.cloudfoundry.org/bbr/index.html).

## Components

BBR orchestrates triggering the backup or restore process on the BOSH deployment, and transfers the backup artifacts to and from the BOSH deployment.

In context of <%= vars.k8s_runtime_abbr %>, BBR backs up and restores the following components:

* <%= vars.k8s_runtime_abbr %> Management Plane, including:
  - BOSH Director VM
  - <%= vars.k8s_runtime_abbr %> control plane API VM and its ETCD database
  - <%= vars.k8s_runtime_abbr %> control plane database VM (MySQL)

* <%= vars.k8s_runtime_abbr %> Clusters, including:
  - <%= vars.k8s_runtime_abbr %> cluster control plane nodes
  - <%= vars.k8s_runtime_abbr %> cluster worker nodes

In context of <%= vars.k8s_runtime_abbr %>, BBR does not back up and restore:

* Kubernetes workloads, see [Backing up and restoring Kubernetes workloads](./backup-and-restore-work.html).
* Ops Manager VM (including the BOSH Director and TKGI tiles), see [Backing up and restoring Ops Manager](./backup-and-restore-om.html).
* NSX-T objects and resources, such as load balancers, see [Backing up and restoring NSX-T](./backup-and-restore-nsxt.html).
* Harbor VM

To install, use, and troubleshoot BBR, see the following topics:

* [Installing BOSH Backup and Restore](bbr-install.html)
* [Backing Up <%= vars.product_short %>](bbr-backup.html)  
* [Restore the BOSH Director](bbr-restore.html#redeploy-restore-director)  
* [Restore the <%= vars.product_short %> Control Plane](bbr-restore.html#redeploy-restore-control-plane)  
* [Restore <%= vars.product_short %> Clusters](bbr-restore.html#redeploy-restore-clusters) 
* [BBR Logging and Troubleshooting](bbr-logging.html).

## Scenarios and Considerations

Test Scenario 						| Expected Result
------------------------------------|----------------------------------------------------------
| Take backup of TKGI using BBR. Delete cluster VMs: control plane and worker nodes. Delete disks and references. Restore cluster nodes using BBR. Delete old worker nodes using kubectl. Restart kubelet. | If the application is deployed before cluster backup, the VIP of the load balancer for the application changes. To recover without application redeployment, create the service using a static IP.
| Take backup of TKGI using BBR. Delete cluster VMs: control plane and worker nodes. Delete disks and references. Restore cluster nodes using BBR. Delete old worker nodes using kubectl. Restart kubelet. | If the application is deployed after cluster backup, the application is no longer available and the NSX-T objects created for the application are automatically deleted.
