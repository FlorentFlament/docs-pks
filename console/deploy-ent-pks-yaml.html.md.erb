---
title: Deploy Enterprise PKS by Using a YAML Configuration File
owner: PKS
---

<strong><%= modified_date %></strong>

If you have an existing YAML configuration file from a previous deployment of <%= vars.product_full %>, you can use the VMware <%= vars.product_short %> Management Console to deploy a new <%= vars.product_short %> instance from that file.

<p class="note"><strong>Note</strong>: You can only use the management console to deploy <%= vars.product_short %> from a YAML file if that YAML file was generated by <%= vars.product_short %> Management Console version 1.5.0 or later. YAML files from previous beta releases of the management console are incompatible with this release.</p>

- For information about how to deploy <%= vars.product_short %> by using the configuration wizard, see [Deploy <%= vars.product_short %> by Using the Configuration Wizard](deploy-ent-pks-wizard.html).
- For information about how to upgrade an existing deployment, see [Upgrade <%= vars.product_short %> Management Console](upgrade-console.html).

## <a id='prereqs'></a>Prerequisites

- [Deploy the <%= vars.product_short %> Management Console Appliance](deploy-console-ova.html) to vCenter Server.
- The vCenter Server instance must be correctly configured for <%= vars.product_short %> deployment. For information about the vCenter Server requirements, see [Virtual Infrastructure Prerequisites](ova-deployment-prereqs.html#infrastructure-prereqs).
- Depending on the type of networking to use, your infrastructure must meet the appropriate prerequisites. For information about networking prerequisites, see the following topics:
  - [Prerequisites for an Unprepared NSX-T Data Center](ova-deployment-prereqs.html#nsxt-not-prepared-prereqs)
  - [Prerequisites for a Prepared NSX-T Data Center](ova-deployment-prereqs.html#nsxt-prepared-prereqs)
  - [Prerequisites for a Flannel Network](ova-deployment-prereqs.html#flannel-prereqs)
- [Log In to <%= vars.product_short %> Management Console](deploy-console-ova.html#access-console).
- You have copied an existing YAML configuration file from a previous <%= vars.product_short %> deployment to your local machine.
- You are familiar with editing YAML configuration files for <%= vars.product_short %>.
- For information about how to set the networking parameters in the YAML file, see [Networking Options in the YAML File](#yaml-network-options) below.

## <a id='import-yaml'></a>Import a YAML Configuration File

1. On the VMware <%= vars.product_short %> landing page, click **Install** then **Import Configuration File**.
1. Drag the YAML file into the Import Configuration File window, or click **Browse** to navigate to it.
1. In the Configuration File editor, modify the contents of the YAML file appropriately for the new instance of <%= vars.product_short %> that you want to deploy.
   - To abandon this YAML and start again, click **Import** to upload the YAML again or to import a new one. 
   - You can also click the **Edit in Wizard** button, to open the imported configuration in the wizard. 
1. When you have finished editing the YAML in the Configuration File editor, click **Export** to save a copy of your updated YAML configuration.
1. Click **Apply Configuration** and **Continue** to deploy <%= vars.product_short %>.
1. On the Installing PKS Instance page, follow the progress of the deployment.
1. When the deployment has completed successfully, click **Go to VMware Enterprise PKS** to monitor and manage your deployment.

## <a id='yaml-network-options'></a>Networking Options in the YAML File

The networking parameters for the three types of <%= vars.product_short %> networking are all included in the `network:` section of the YAML file. When you edit the YAML file, you must set only those parameters that apply to your type of networking. 

The following table lists the parameters that you must set for each type of networking.

<table>
  <tr>
    <td>Unprepared NSX-T Data Center</td>
    <td>Prepared  NSX-T Data Center</td>
    <td>Flannel</td>
  </tr>
  <tr>
    <td><code>use_nsx<br />
autoprovision_nsx <br />
external_portgroup_gateway<br />
external_portgroup_netmask<br />
external_portgroup_subnet<br />
external_vlan_id<br />
active_t0_edge_node<br />
active_t0_edge_node_ip<br />
standby_t0_edge_node<br />
standby_t0_edge_node_ip<br />
t0_edge_node_lb_ip<br />
dep_network_cidr<br />
dep_dns<br />
nsx_pod_cidr<br />
nsx_node_cidr<br />
nsx_dns<br />
floating_ips_range<br />
nsx_manual_ssl_certs<br />
nsx_ca_crt<br />
nsx_verify_ssl_certs<br />
nsx_host<br />
nsx_password<br />
nsx_username<br />
ntp_servers</code></td>
    <td><code>use_nsx<br />
autoprovision_nsx<br />
dep_network_name<br />
nsx_pod_ip_block_id<br />
nsx_node_ip_block_id<br />
nsx_t0_id<br />
nsx_fip_id<br />
dep_dns<br />
nsx_dns<br />
nsx_manual_ssl_certs<br />
nsx_ca_crt<br />
nsx_verify_ssl_certs<br />
nsx_nat_mode<br />
nsx_host<br />
nsx_password<br />
nsx_username<br />
ntp_servers</code></td>
    <td><code>
use_nsx<br />
dep_network_name<br />
dep_network_cidr<br />
dep_network_gateway<br />
dep_dns<br />
dep_reserved_ip_range_from<br />
dep_reserved_ip_range_to<br />
svc_network_name<br />
svc_network_cidr<br />
svc_network_gateway<br />
svc_dns<br />
svc_reserved_ip_range_from<br />
svc_reserved_ip_range_to<br />
flannel_pod_network_cidr<br />
flannel_service_network_cidr<br />
ntp_servers</code></td>
</tr>
</table>

## <a id='next-step'></a> Next Step

For information about how you can use <%= vars.product_short %> Management Console to monitor and manage your deployment, see [Monitor and Manage <%= vars.product_short %> in the Management Console](monitor-manage-console.html).

If <%= vars.product_short %> fails to deploy, see [Troubleshooting](console-troubleshooting.html).