---
title: Defining Network Profiles for Distributed Firewall Section Marking
owner: PKS
---

<strong><%= modified_date %></strong>

This topic describes how to define network profiles to create markers for NSX-T distributed firewall (DFW).

## <a id='shared-t1-about'></a> About the DFW Section Markers

NSX-T applies distributed firewall (DFW) rules on ESXi transport nodes to control north-south traffic into and out of the virtual network environment. Edge firewall (EFW) rules run on Edge transport nodes and control east-west traffic.

When a Kubernetes developer creates a [network policy](https://kubernetes.io/docs/concepts/services-networking/network-policies/), NCP translates that policy into a DFW rule. NCP does not, however, place this rule in any particular order in the stack of rules. All "Allow" rules are created above alll "Deny" rules. This means the "Allow" takes higher precedence than "Deny" rules. 

If multiple "Allow" rules are created, they are executed in chronological order: the previously created "Allow" rule takes precedence over the recently created one. This may not be the ordering that network administrators want, or it may disrupt the desired ordering.

With the top section marker, the operational rules can be created in the top section, NCP will create any rules when Kubernetes network policies are created always below this top section marker. Thus, the operational rules created will not be over-ridden by developers.

Drop/deny rules operate in the bottom section. You can define a bottom section marker so that drop/deny rules created by NCP do not displace 


## <a id='shared-t1-implement'></a> Implementing a Single Tier Topology

To implement a shared Tier-1 topology, you define a network profile that enables the `single_tier_toplogy` key. Shown below is an example network profile to enable a Shared Tier-1 Router for Kubernetes clusters:

```
{
 "name": "Example network profile",
 "description": "Network profile to enable DFW section marking",
 "parameters": {
   "cni_configurations":
   {
      "type":"nsxt",
      "parameters": {
        "top_firewall_section_marker":"section-id"
        "bottom_firewall_section_marker":"section-id"        
      }
    }
  }
}
```

To create a shared Tier-1 cluster, use the appropriate network profile when creating the cluster.
