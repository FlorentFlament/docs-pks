---
title: Release Notes
owner: PKS
topictype: releasenotes
---

This topic contains release notes for <%= vars.product_full %> v1.7.0.

<p class="note warning"><strong>Warning:</strong> Before installing or upgrading to <%= vars.product_short %> v1.7.0,
review the <a href="#1-7-0-breaking-changes">Breaking Changes</a> below.
</p>

## <a id="1.7.0"></a>v1.7.0

**Release Date**: TK

### <a id="1-7-0-features"></a>Features

This section describes new features and changes in this release.

#### <a id="1-7-0-pks-core"></a>PKS Control Plane and API

<%= vars.product_short %> v1.7.0 updates include:

* Support for high availability (HA) mode in <%= vars.product_short %>.
You can now scale the number of VM instances for the following <%= vars.product_short %> control plane components:

    * <%= vars.product_short %> API and UAA
    * <%= vars.product_short %> database

    For configuration instructions,
    see [Resource Config](installing-pks-vsphere.html#resource-config) in the _Installing_ topic for your IaaS.
    These instructions are intended for new installations of <%= vars.product_short %> v1.7.0.
    If you want to upgrade to <%= vars.product_short %> v1.7.0,
    see [<%= vars.product_short %> Database Migration](#1-7-0-db-migration) in _Breaking Changes_ below.
* Support for _Kubernetes profiles_ that customize Kubernetes component settings for <%= vars.k8s_runtime_abbr %>-provisioned clusters.
Kubernetes profiles can include validated configurations supported the PKS team, and unvalidated configurations for evaluation only.
For more information, see [Using Kubernetes Profiles](./k8s-profiles.html).  
* Support for resizing and updating Kubernetes clusters that have not been upgraded to the current <%= vars.product_short %> version.  
* All internal components use TLS v1.2+ with strong ciphers.  
* Increases to 65K the maximum number of open files for the Docker process on worker nodes.  

#### <a id="1-7-0-bosh-lifecycle"></a>Kubernetes Control Plane

<%= vars.product_short %> v1.7.0 updates include:

#### <a id="1-7-0-logging-monitoring"></a>PKS Monitoring and Logging

<%= vars.product_short %> v1.7.0 updates include:

* Adds new metrics that <%= vars.product_short %> can send to your monitoring service:
  - Node Exporter metrics from the <%= vars.control_plane %> VM and worker nodes in Prometheus format
  - Metrics from the Kubernetes controller manager and Kubernetes API server on master nodes  

    For configuration instructions, see [Telegraf](installing-pks-vsphere.html#telegraf) in the _Installing_ topic for your IaaS.

* Deprecates the billing database.
The billing database is scheduled to be removed in <%= vars.product_short %> v1.9.
You can use Telemetry instead of the billing database.
For more information about the billing database and Telemetry, see [Viewing Usage Data](view-usage-data.html#billing-db)
and [Telemetry](telemetry.html).
If you are impacted by this deprecation,
please reach out to <a href="mailto:pks-telemetry@groups.vmware.com">pks-telemetry@groups.vmware.com</a>.

####<a id="1-7-0-windows-features"></a>Windows on PKS

<%= vars.product_short %> v1.7.0 updates include:

####<a id="1-7-0-nsx-t-features"></a>PKS with NSX-T Networking

<%= vars.product_short %> v1.7.0 updates include:

#### <a id="1-7-0-telemetry"></a>Customer Experience Improvement Program (CEIP)

<%= vars.product_short %> v1.7.0 updates include:

* Telemetry can communicate through proxies, as set in the <%= vars.product_short %> proxy settings in the PKS tile > **Networking** pane.

#### <a id="1-7-0-component-updates"></a>Component Updates

<%= vars.product_short %> v1.7.0 updates include:

* Bumps Kubernetes to v1.16.4.
* Bumps NCP to v2.5.1.
* Bumps UAA to v74.15.0, which addresses CSRF vulnerability.

####<a id="1-7-0-bug-fixes"></a>Bug Fixes

<%= vars.product_short %> v1.7.0 includes the following bug fixes:

* Improves the behavior of the `pks get-kubeconfig` and `pks get-credentials` commands during cluster updates and upgrades.
You can now run the `pks get-kubeconfig` command during single- and multi-master cluster updates.
Additionally, you can run the `pks get-credentials` command during multi-master cluster upgrades.

### <a id='1-7-0-snapshot'></a>Product Snapshot

<table class="nice">
    <tr>
        <th>Release</th>
        <th>Details</th>
    </tr>
    <tr>
        <td>Version</td>
        <td>v1.7.0</td>
    </tr>
    <tr>
        <td>Release date</td>
        <td>TK</td>
    </tr>
    <tr>
        <th>Component</th>
        <th>Version</th>
    </tr>
    <tr>
        <td>Kubernetes</td>
        <td>v1.16.4</td>
    </tr>
    <tr>
        <td>On-Demand Broker</td>
        <td>v0.38.0</td>
    </tr>
    <tr>
        <td>NCP</td>
        <td>v2.5.1</td>
    </tr>
    <tr>
        <td>UAA</td>
        <td>v74.15.0</td>
    </tr>
    <tr>
        <td>Percona XtraDB Cluster (PXC)</td>
        <td>v0.22</td>
    </tr>
    <tr>
        <td>Docker</td>
        <td>v18.09.9</td>
    </tr>
        <tr>
        <th>Compatibilities</th>
        <th>Versions</th>
    <tr>
        <td>Ops Manager</td>
        <td></td>
    </tr>
    <tr>
        <td>NSX-T</td>
        <td></td>
    </tr>
        <tr>
        <td>Xenial stemcells</td>
        <td>v621.55</td>
    </tr>
    <tr>
        <td>Windows stemcells</td>
        <td>v2019.7</td>
    </tr>
    <tr>
        <td>Backup and Restore SDK</td>
        <td>v1.17.0</td>
    </tr>
</table>

### <a id='1-7-0-vsphere-reqs'></a>vSphere Version Requirements

For <%= vars.product_short %> installations on vSphere or on vSphere with NSX-T Data Center, refer to the <a href="https://www.vmware.com/resources/compatibility/sim/interop_matrix.php#interop&356=&175=&1=">VMware Product Interoperability Matrices</a>.</p>

### <a id='1-7-0-upgrade'></a>Upgrade Path

The supported upgrade paths to <%= vars.product_short %> v1.7.0 are from <%= vars.product_short %> v.

### <a id='1-7-0-breaking-changes'></a>Breaking Changes

<%= vars.product_short %> v1.7.0 has the following breaking changes:

#### <a id='1-7-0-db-migration'></a><%= vars.product_short %> Database Migration

To enable HA support for the <%= vars.product_short %> database,
this release migrates the database from the PKS API VM to a new instance group, PKS Database.

<%= vars.product_short %> performs the database migration as part of your <%= vars.product_short %> upgrade to v1.7.
During the upgrade, the <%= vars.product_short %> control plane and the PKS CLI will be unavailable.
Your Kubernetes workloads will remain accessible throughout the upgrade.

To upgrade to <%= vars.product_short %> v1.7,
follow the instructions below:

1. [Upgrade Preparation Checklist for Enterprise PKS v1.7](checklist.html)
1. [Upgrading Enterprise PKS](upgrade-pks.html) or [Upgrading Enterprise PKS with NSX-T](upgrade-pks-nsxt.html)

These topics contain important preparation and upgrade configuration steps
you must follow before and during your upgrade to v1.7.

###<a id='1-7-0-known-issues'></a>Known Issues

<%= vars.product_short %> v1.7.0 has the following known issues.

#### <a id="1-7-0-oidc-response-header"></a>502 Bad Gateway After OIDC Login  

**Symptom**  

You experience a "502 Bad Gateway" error from the NSX load balancer after you log in to OIDC.  

**Explanation**  

A large response header has exceeded your NSX-T load balancer maximum 
response header size. The default maximum response header size is 10,240 characters and should 
be resized to 50,000.  

**Workaround**  

If you experience this issue, manually reconfigure your NSX-T `request_header_size` 
and `response_header_size` to 50,000 characters. 
For information about configuring NSX-T default header sizes, 
see [OIDC Response Header Overflow](https://community.pivotal.io/s/article/OIDC-Response-Header-overflow) in the Pivotal Knowledge Base.  

#### <a id='1-7-0-uuid-length'></a> One Plan ID Longer than Other Plan IDs  

**Symptom**  

One of your plan IDs is one character longer than your other plan IDs.  

**Explanation**  

In <%= vars.product_short %>, each plan has a unique plan ID. 
A plan ID is normally a UUID consisting of 32 alphanumeric characters and 4 hyphens. 
However, the **Plan 4** ID consists of 33 alphanumeric characters and 4 hyphens.  

**Solution**  

You can safely configure and use **Plan 4**. 
The length of the **Plan 4** ID does not affect the functionality of **Plan 4** clusters.  

If you require all plan IDs to have identical length, do not activate or use **Plan 4**.  

#### <a id='1-7-0-eight-cores-error'></a> NSX-T Pre-Check Errand Fails Due to Edge Node Configuration  

**Symptom**  

You have configured your NSX-T Edge Node VM as `medium` size, 
and the NSX-T Pre-Check Errand fails with the following error: 
"_ERROR: NSX-T Precheck failed due to Edge Node ... no of cpu cores is less than 8_". 

**Explanation**  

The NSX-T Pre-Check Errand is erroneously returning the "_cpu cores is less than 8_" error.

**Solution**  

You can safely configure your NSX-T Edge Node VMs as `medium` size and ignore the error. 
 
