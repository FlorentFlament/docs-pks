---
title: Viewing Usage Quotas
owner: PKS
---

<strong><%= modified_date %></strong>

<%= partial 'beta-component' %>

This topic describes how to review your resource usage 
and quotas in <%= vars.product_full %> using 
the <%= vars.product_short %> API.  

## <a id="overview"></a> Overview

Your <%= vars.product_short %> administrator might set a limit on
the number of clusters you can provision and  
the resources, such as amount of memory and number of CPUs, 
that are allocated in total to any clusters you create and workloads you deploy. 

The resource quota limitations are based on the total allocated size 
of the VM instances you create, not their actual utilization. 

By using the PKS API, you can check the resource and cluster 
limitations that the administrator has assigned to you as well as 
review your current usage.
    
## <a id='set-token'></a> Set up Your API Access Token

The curl commands in this topic use an access token environment variable to 
authenticate to the PKS API endpoints.

<%= partial 'create-auth-token-var' %>

## <a id='quota-dev'></a> View Quotas

The PKS API `quotas` endpoint returns your resource usage and cluster quota in the JSON format.

To view your resource and cluster quota, run the following command:

```
curl -k -H "Authorization: Bearer $YOUR-ACCESS-TOKEN" \
https://PKS-API:9021/v1beta1/quotas/USER-ID
```

Where:

* `YOUR-ACCESS-TOKEN` is your access token environment variable.
* `PKS-API` is the FQDN of your PKS API endpoint. For example, `api.pks.example.com`.
* `USER-ID` is your <%= vars.product_short %> user ID.

For example:
<pre class="terminal">
$ user=exampleuser
$ pks login -a pks.my.lab -u $user -p 'psswrdabc123...!' -k; export TOKEN=$(bosh int ~/.pks/creds.yml --path /access_token)
$ curl -k -H "Authorization: Bearer $TOKEN" \
https&#58;//example.com&#58;9021/v1beta1/quotas/$user 
{
  "owner":"cody",
  "limit":{
      "cpu":2,
      "memory":1.0,
      "cluster": 6
  }
}
</pre>

## <a id='usage-dev'></a> View Usage

The PKS API `usages` endpoint reports your actual resource usage in the JSON format.

To view your current allocated resource usage, run the following command:

```
curl -k -H "Authorization: Bearer $YOUR-ACCESS-TOKEN" \
https://PKS-API:9021/v1beta1/usages/USER-ID
```

Where:

* `YOUR-ACCESS-TOKEN` is your access token environment variable.
* `PKS-API` is the FQDN of your PKS API endpoint. For example, `api.pks.example.com`.
* `USER-ID` is your <%= vars.product_short %> user ID.

For example:
<pre class="terminal">
$ user=exampleuser
$ pks login -a pks.my.lab -u $user -p 'psswrdabc123...!' -k; export TOKEN=$(bosh int ~/.pks/creds.yml --path /access_token)
$ curl -k -H "Authorization: Bearer $TOKEN" \
https&#58;//example.com&#58;9021/v1beta1/usages
[
  {
    "owner": "cody",
    "totals": {
      "cpu": 2,
      "memory": 1,
      "cluster": 2
    },
  }
]
</pre>

## <a id="error"></a> Error Message When You Exceed Cluster Quota

If you exceed your set cluster creation quota, then 
the following error message 
appears when you attempt to create a cluster.

<pre class="terminal">
Error: You do not have enough privileges to perform this action. 
Please contact the PKS administrator.
</pre>