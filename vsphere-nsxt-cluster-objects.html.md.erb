---
title: vSphere with NSX-T Cluster Objects
owner: PKS
---

<strong><%= modified_date %></strong>

This topic lists the PKS objects created when you create Kubernetes cluster on vSphere with NSX-T integration.

##<a id="vsphere-version"></a> vSphere Virtual Machines

When a new Kubernetes cluster is created, the following VMs are created by default:

- 1 or 3 Kubernetes master nodes (depends on the plan chosen)
- 1 or more Kubernetes worker nodes (depends on the plan chosen)

<table class="nice">
  <tr>
    <th>Amount</th>
    <th>Object</th>
  </tr>
  <tr>
    <td>
      <ul>
        <li>VMware vSphere 6.7 U1</li>
        <li>VMware vSphere 6.7.0</li>
        <li>VMware vSphere 6.5 U2</li>
        <li>VMware vSphere 6.5 U1</li>
      </ul>
    </td>
    <td>
      <ul>
        <li>vSphere Enterprise Plus</li>
        <li>vSphere with Operations Management Enterprise Plus</li>
      </ul>
    </td>
  </tr>
</table>

##<a id="vsphere-version"></a> NSX-T Objects

When a new Kubernetes Cluster is created, the following NSX-T objects are created by default:

NSX-T Logical Switch:

- 1 logical switch for Kubernetes master and worker nodes
- 1 logical switch for each Kubernetes namespace (`default`, `kube-public`, `kube-system`, `pks-infrastructure`)
- 1 logical switch for the NSX-T load balancer associated with the Kubernetes Cluster

NSX-T Tier-1 Router:

- 1 Tier-1 router for Kubernetes master and worker nodes (called ”cluster-router”)
- 1 Tier-1 router for each Kubernetes namespace (default, kube-public, kube-system, pks-infrastructure)
- 1 Tier-1 router for the NSX-T load balancer associated with the Kubernetes Cluster

NSX-T Load Balancer:

1 NSX-T load balancer small instance containing the following objects:

- 1 Virtual Server (VS) to access Kubernetes control plane API (with port 8443). The IP allocated to the VS is derived from the PKS Floating IP Pool.
- 1 Server Pool containing the 3 Kubernetes master nodes.
- 1 Virtual Server for Ingress Controller (HTTP) - IP allocated to the VS: derived from the PKS Floating IP Pool.
- 1 Virtual Server for Ingress Controller (HTTPS) - IP allocated to the VS: derived from the PKS Floating IP Pool.

Note: VS for HTTP Ingress Controller and VS for HTTPS Ingress Controller use the same IP.

NSX-T DDI/IPAM:

- A /24 subnet from the Nodes IP Block will be extracted and allocated for the Kubernetes master and worker nodes.
NSX-T DDI/IPAM:
- A /24 subnet from the PODs IP Block will be extracted and allocated for each Kubernetes namespace (default, kube-public, kube-system, pks-infrastructure).

NSX-T Tier-0 router:

- 1 SNAT rule created for each Kubernetes namespace (default, kube-public, kube-system, pks-system) using 1 IP from Floating IP Pool as translated IP address.
- 1 SNAT rule created for each Kubernetes cluster (in case NAT topology is used) using 1 IP from Floating IP Pool as translated IP address. The Kubernetes cluster subnet is derived from the Nodes IP Block, using a /24 netmask.

NSX-T Distributed Firewall (DFW):

- 1 DFW rule for kubernetes-dashboard: Source=Kubernetes worker node (hosting the dashboard POD) / Destination= dashboard POD IP / Port: TCP/8443 / Action: allow
- 1 DFW rule for kube-dns: Source=Kubernetes worker node (hosting the DNS POD) / Destination= DNS POD IP / Port:  TCP/ 8081 and TCP/ 10054 / Action: allow



##<a id='pks-with-nsx-t'></a> NSX-T Integration Component Version Requirements

PKS on vSphere with NSX-T supports the following vSphere component versions:

<table class="nice">
  <tr>
    <th>Amount</th>
    <th>Object</th>
  </tr>
  <tr>
    <td>
      <ul>
        <li>VMware vSphere 6.7 U1</li>
        <li>VMware vSphere 6.7.0</li>
        <li>VMware vSphere 6.5 U2</li>
        <li>VMware vSphere 6.5 U1</li>
      </ul>
    </td>
    <td>
      <ul>
        <li>vSphere Enterprise Plus</li>
        <li>vSphere with Operations Management Enterprise Plus</li>
      </ul>
    </td>
  </tr>
</table>