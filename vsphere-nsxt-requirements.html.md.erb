---
title: vSphere with NSX-T Prerequisites and Resource Requirements
owner: PKS
topictype: vspherewithnsxt
---

<strong><%= modified_date %></strong>

This topic describes the prerequisites and resource requirements for installing Pivotal Container
Service (PKS) on vSphere with NSX-T integration.

For prerequisites and resource requirements for installing PKS on vSphere without NSX-T
integration, see
[vSphere Prerequisites and Resource Requirements](vsphere-requirements.html).

PKS supports air-gapped deployments on vSphere with or without NSX-T integration.

You can also configure integration with the Harbor tile, an enterprise-class registry server for
container images. For more information, see
[VMware Harbor Registry](https://docs.pivotal.io/partners/vmware-harbor/index.html) in the
_Pivotal Partner documentation_.

##<a id='prerequisites'></a> Prerequisites

###<a id='vsphere'></a> vSphere Version Requirements

PKS on vSphere with NSX&#8209;T supports the following vSphere component versions:
<%= partial '_vsphere_versions' %>

###<a id='pks-with-nsx-t'></a> NSX-T Integration Component Version Requirements

Deploying NSX-T requires the additional following component versions:

<table class="nice">
  <tr>
    <th>Component</th>
    <th>Version</th>
  </tr>
  <tr>
    <td>VMware NSX-T</td>
    <td>2.2, 2.3</td>
  </tr>
</table>

###<a id='opsman'></a> Pivotal Ops Manager

Before you install PKS, you must install one of the following:

* Pivotal Ops Manager v2.2.3 or later
* Pivotal Ops Manager v2.3.1 or later
* Pivotal Ops Manager v2.4.x

<p class="note"><strong>Note:</strong> You use Ops Manager to install and configure PKS. Each
version of Ops Manager supports multiple versions of PKS. To confirm that your Ops Manager version
supports the version of PKS that you install, see <a href="release-notes.html">PKS Release Notes</a>.</p>

To install an Ops Manager version that is compatible with the PKS version you intend to use,
follow the instructions in the corresponding version of the Ops Manager documentation.

<table>
  <tr>
    <th>Version</th>
    <th></th>
  </tr>
  <tr>
    <td>Ops Manager v2.2</td>
    <td>
      <ul>
        <li><a href="https://docs.pivotal.io/pcf/om/2-2/vsphere/deploy.html">Deploying BOSH and Ops Manager to vSphere</a></li>
        <li><a href="https://docs.pivotal.io/pcf/om/2-2/vsphere/config.html">Configuring BOSH Director on vSphere</a></li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Ops Manager v2.3</td>
    <td>
      <ul>
        <li><a href="https://docs.pivotal.io/pcf/om/2-3/vsphere/deploy.html">Deploying BOSH and Ops Manager to vSphere</a></li>
        <li><a href="https://docs.pivotal.io/pcf/om/2-3/vsphere/config.html">Configuring BOSH Director on vSphere</a></li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>Ops Manager v2.4</td>
    <td>
      <ul>
        <li><a href="https://docs.pivotal.io/pcf/om/2-4/vsphere/deploy.html">Deploying BOSH and Ops Manager to vSphere</a></li>
        <li><a href="https://docs.pivotal.io/pcf/om/2-4/vsphere/config.html">Configuring BOSH Director on vSphere</a></li>
      </ul>
    </td>
  </tr>
</table>

##<a id='resources'></a> Resource Requirements

###<a id='pks'></a> PKS

Installing Ops Manager and PKS requires the following virtual machines (VMs):

<table>
  <tr>
    <th>VM</th>
    <th>CPU</th>
    <th>RAM</th>
    <th>Storage</th>
  </tr>
  <tr>
    <td>Pivotal Container Service</td>
    <td>2</td>
    <td>8 GB</td>
    <td>16 GB</td>
  </tr>
  <tr>
    <td>Pivotal Ops Manager</td>
    <td>1</td>
    <td>8 GB</td>
    <td>160 GB</td>
  </tr>
  <tr>
    <td>BOSH Director</td>
    <td>2</td>
    <td>8 GB</td>
    <td>16 GB</td>
  </tr>
</table>

Each PKS deployment requires ephemeral VMs during installation and upgrades of PKS.
After you deploy PKS, BOSH automatically deletes these VMs.

To enable PKS to dynamically create the ephemeral VMs when needed, ensure that the following
resources are available in your vSphere infrastructure before deploying PKS:

<table>
  <tr>
    <th>Ephemeral VM</th>
    <th>Number</th>
    <th>CPU Cores</th>
    <th>RAM</th>
    <th>Ephemeral Disk</th>
  </tr>
  <tr>
    <td>BOSH Compilation VMs</td>
    <td>4</td>
    <td>4</td>
    <td>4 GB</td>
    <td>16 GB</td>
  </tr>
</table>

###<a id='kubernetes'></a> Kubernetes

Each Kubernetes cluster provisioned through PKS deploys the VMs listed below. If you deploy more
than one Kubernetes cluster, you must scale your allocated resources appropriately.

<table>
  <tr>
    <th>VM</th>
    <th>Number</th>
    <th>CPU Cores</th>
    <th>RAM</th>
    <th>Ephemeral Disk</th>
    <th>Persistent Disk</th>
  </tr>
  <tr>
    <td>master</td>
    <td>1 or 3</td>
    <td>2</td>
    <td>4 GB</td>
    <td>8 GB</td>
    <td>5 GB</td>
  </tr>
  <tr>
    <td>worker</td>
    <td>1 or more</td>
    <td>2</td>
    <td>4 GB</td>
    <td>8 GB</td>
    <td>10 GB</td>
  </tr>
  <tr>
    <td>errand (ephemeral)</td>
    <td>1</td>
    <td>1</td>
    <td>1 GB</td>
    <td>8 GB</td>
    <td>none</td>
  </tr>
</table>

###<a id='resources-nsx-t'></a> NSX-T

Deploying NSX-T requires the additional following resources from your vSphere environment:

<table>
  <tr>
    <th>NSX-T Component</th>
    <th>Instance Count</th>
    <th>Memory per Instance</th>
    <th>vCPU per Instance</th>
    <th>Disk Space per Instance</th>
  </tr>
  <tr>
    <td>NSX Manager Appliance</td>
    <td>1</td>
    <td>16 GB</td>
    <td>4</td>
    <td>140 GB</td>
  </tr>
  <tr>
    <td>NSX Controllers</td>
    <td>3</td>
    <td>16 GB</td>
    <td>4</td>
    <td>120 GB</td>
  </tr>
  <tr>
    <td>NSX-T Edge</td>
    <td>1 up to 8 </td>
    <td>16 GB</td>
    <td>8</td>
    <td>120 GB</td>
  </tr>
</table>

##<a id='firewall-ports'></a> Firewall Requirements

For the firewall ports and protocols requirements for using PKS on vSphere with NSX-T integration,
see [Firewall Ports and Protocols Requirements](ports-protocols-nsx-t.html).

##<a id='other'></a> Other Requirements

* Complete any confirmation tasks described in the [VMware NSX-T Data Center Documentation](https://docs.vmware.com/en/VMware-NSX-T/index.html)
to verify your configuration before proceeding to the next step.
* Comply with any requirements described in the [VMware NSX-T Data Center Documentation](https://docs.vmware.com/en/VMware-NSX-T/index.html).

<p class="note"><strong>Note</strong>: When you use NSX-T 2.1, creating namespaces with names
longer than 40 characters may result in a truncated or hashed name in the NSX-T Manager UI.</p>
