---
title: Windows-worker clusters in PKS (Beta)
owner: PKS
---

<strong><%= modified_date %></strong>

This topic describes how to enable creating Windows-worker based cluster in <%= vars.product_full %> and ways to provide feedback to the Windows product team. This feature is in Beta for  <%= vars.product_short %> 1.4.

With <%= vars.product_short %> 1.4, operators can provision a Windows worker-based Kubernetes cluster on vSphere with Flannel. Windows worker-based clusters in <%= vars.product_short %> 1.4 currently do not support NSX-T integration. 

For conceptual information regarding creating PKS clusters, see [PKS Concepts](concepts.html)

<p class="note warning"> <strong>IMPORTANT: </strong></p> This feature is in Beta and only works in vSphere with Flannel. Do not enable this feature if your are using <%= vars.product_short %> 1.4 with Google Cloud Platform (GCP), Azure, Amazon Web Services (AWS), or vSphere with NSX-T.
</p>

## <a id='prerequisites'></a>Prerequisites
The following are prerequisites for enabling the creation of a Windows-worker based cluster in <%= vars.product_short %> 1.4. 
<ol>
<li>[vSphere Windows Server 2019 Stemcell](https://docs.pivotal.io/pivotalcf/2-4/windows/create-vsphere-stemcell.html)</li>
<li>Ops Manager v2.3.1+, v2.4.0+</li>
<li>[vSphere Prerequisites and Resource Requirements](vsphere-requirements.html)</li>
</ol>

## <a id='install'></a> Install <%= vars.product_short %> on vSphere
1. Complete the steps in [Installing PKS on vSphere](installing-pks-vsphere.html) with the following considerations:
	1. In the **Plans** section: 
	<ul>
		<li>Enable **Enable Windows worker support** in one or more of plans 2 through 10.</li>
		<li>Ignore the **Worker Persistent Disk Type** drop down.</li>
			<li>This option does not work with Windows because BOSH does not support persistent disks for Windows VMs. If this is a requirement for you, leave that feedback in this Feedback form.</li>
		<li>Ignore the **Enable Privileged Containers** check box.</li>
			<li>Windows does not support privileged containers.</li>
		<li>Ignore the **Disable DenyEscalatingExec** check box.</li>
			<li>This is not supported in Windows.</li>
	</ul>
	1. In the **Networking** section, under the **Container Networking Interface** select **Flannel**.
		<p class="note"><strong>Note:</strong> NSX-T does not support networking Windows containers. If this is a key requirement for you, leave that feedback in this Feedback form.
		</p>
1. Upload your vSphere Windows Server 2019 Stemcell to the BOSH Director:
	1. If you use the Ops Manager jumpbox to connect to the BOSH Director, ssh into the Ops Manager VM. For more information see, [vSphere](https://docs.pivotal.io/pivotalcf/2-4/customizing/trouble-advanced.html#ssh-vsphere)
	1. Login to the BOSH Director. 
	1. To upload the vSphere Windows Server 2019 Stemcell run the following command:
	`bosh -e alias-vsphere-env upload-stemcell bosh-stemcell-2019.1-vsphere-esxi-windows2019-go_agent.tgz`

## <a id='next'></a> Next Steps



## <a id='feedback'></a>Feedback

We are actively looking for feedback on this Beta feature. To submit feedback, send an email to pcf-windows@pivotal.io or submit this Feedback Form. 

